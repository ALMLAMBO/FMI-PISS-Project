<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <title>Registration</title>
</head>
<body>
    <form action="">
        <label for="username">Потрбителско име</label><br>
        <input type="text" id="username" name="username"><br>
        <label for="email">Имейл</label><br>
        <input type="email" id="email" name="email"><br>
        <label for="fn">Факултетен номер</label><br>
        <input type="text" id="fn" name="fn"><br>
        <label for="university">Университет</label>
        <!--<input type="text" id="university" name="university"><br>-->
        <select id="university-dropdown" name="university">
        </select><br>
        <label for="password">Парола</label><br>
        <input type="password" id="password" name="password"><br>
        <label for="confirm-password">Повторете парола</label><br>
        <input type="password" id="confirm-password" name="confirm-password"><br>
        <label for="image-fn">Снимка на документ от университета с факултетен номер</label><br>
        <input type="file" id="image-fn" name="image-fn" accept="image/png, image/jpeg"><br><br>
        <input type="submit" value="Submit">
    </form>

    <script>
        let dropdown = $('#university-dropdown');

        dropdown.empty();

        dropdown.append('<option selected="true" disabled>Университет</option>');
        dropdown.prop('selectedIndex', 0);

        const url = '/university_ex.json';

        // Populate dropdown
        $.getJSON(url)
        .done(function (data) {
            $.each(data, function (key, entry) {
                dropdown.append($('<option></option>').attr('value', entry.id).text(entry.uni_name));
            });
        })
        .fail(function (jqxhr, textStatus, error) {
            const err = textStatus + ', ' + error;
            console.error('Error loading JSON file: ' + err);
            // Handle the error, e.g., display a message to the user.
        });
    </script>
</body>
</html>